# 新しいマイグレーションの適用手順（冪等性を考慮）

インデックス追加マイグレーションを確実に適用するため、以下の手順で実行してください：

## 1. 既存マイグレーションのロールバック

まず、既存のマイグレーションをロールバックして、クリーンな状態にします：

```bash
# task-backend ディレクトリ内で実行
cd task-backend

# 既存のマイグレーションをロールバック
sea-orm-cli migrate down
```

## 2. マイグレーションの適用

次に、すべてのマイグレーションを再適用します（テーブル作成とインデックス追加の両方）：

```bash
# 全マイグレーションを適用
sea-orm-cli migrate up
```

## 3. 適用状況の確認

マイグレーションが正しく適用されたかを確認します：

```bash
# マイグレーション状態の確認
sea-orm-cli migrate status
```

適用されると、以下の両方のマイグレーションが適用済みとして表示されます：

- `m20250511_073638_create_task_table`（テーブル作成）
- `m20250512_000001_add_task_indexes`（インデックス追加）

この手順により、どのような状態から始めても一貫した結果を得ることができます。冪等性が確保され、環境に関わらず同じスキーマが適用されます。
